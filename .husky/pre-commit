# Guardrail: Prevent package.json changes without lockfile update
node scripts/validate-lockfile.mjs || exit 1

# Verify lockfile is in sync
pnpm install --frozen-lockfile --ignore-scripts || {
  echo "‚ùå Lockfile out of sync! Run 'pnpm install' and commit pnpm-lock.yaml"
  exit 1
}

# Run lint-staged (lints and formats only staged files)
pnpm lint-staged
